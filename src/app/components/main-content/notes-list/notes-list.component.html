<div class="main-input-container">
    <div class="input-container" [style.backgroundColor]="selectedColor">
        <div class="input-box">
            <div class="input-line title-box">
                <textarea [style.backgroundColor]="selectedColor" class="input-title" autosize type="text"
                    [(ngModel)]="title" placeholder="Title" rows="1"></textarea>
                <span class="pinn">
                    <img *ngIf="isPinned" class="icon" (click)="isPinned = false" src="assets/icons/pin-black.svg"
                        alt="Pinned">
                    <img *ngIf="!isPinned" class="icon" (click)="isPinned = true" src="assets/icons/pin-white.svg"
                        alt="Not pinned">
                </span>
            </div>
            <div class="input-content-container">
                <div *ngIf="!isChecklist" class="input-line title-box">
                    <textarea [style.backgroundColor]="selectedColor" class="input-content" autosize type="text"
                        [(ngModel)]="note" placeholder="Note" rows="1"></textarea>
                    <!-- <label class="input-checkbox">
                        <input type="checkbox" [(ngModel)]="isChecklist"
                            (change)="checklistItems.length === 0 && addChecklistItem()"> Checkliste
                    </label> -->

                </div>
                <div *ngIf="isChecklist">
                    <div *ngFor="let item of checklistItems; let i = index" style="min-height: 58px;">
                        <div class="input-line outerbox checklist-area-border">
                            <img [src]="item.checked ? './assets/icons/checkbox-check.svg' : './assets/icons/checkbox-unchecked.svg'"
                                (click)="checklistItems[i].checked = !checklistItems[i].checked" class="icon checkbox"
                                [alt]="item.checked ? 'Checked' : 'Unchecked'">
                            <textarea #textArea [id]="'item-' + item.id" [style.backgroundColor]="selectedColor"
                                class="input-content textbox checklist-area-input" autosize type="text"
                                [(ngModel)]="checklistItems[i].text" placeholder="Checklist Item" rows="1"></textarea>
                            <div class="closebox">
                                <img class="icon close" (click)="removeChecklistItem(item.id)"
                                    src=".\assets\icons\close.svg" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="icon add-checklist" (click)="addChecklistItem()">
                        <img width="32px" height="32px" src=".\assets\icons\add-row.svg" alt="">Listeneintrag
                        hinzuf√ºgen
                    </div>

                </div>
            </div>
        </div>
        <div *ngIf="imageUrls.length != 0" class="image-preview">
            <img *ngFor="let imageUrl of imageUrls" [src]="imageUrl" alt="Selected Image" class="preview-image">
        </div>
        <div class="input-footer-container">
            <div class="footer-menu-container">
                <div class="icon"></div>

                <div class="color-selector" (click)="toggleDropdown()">
                    <img class="icon" src="assets/icons/color-white.svg" alt="">
                    <div class="dropdown-menu" *ngIf="isDropdownOpen">
                        <div *ngFor="let color of colors" class="dropdown-item icon"
                            [style.backgroundColor]="color.value" (click)="selectColor(color.value);toggleDropdown()">
                        </div>
                    </div>
                </div>

                <div>
                    <img class="icon" src="assets/icons/img-white.svg" alt="" (click)="fileInput.click()">
                    <input type="file" #fileInput (change)="onFileSelected($event)" multiple accept="image/*"
                        style="display: none;">
                </div>

                <div>
                    <img class="icon" src=".\assets\icons\label.svg" alt="" (click)="this.label.addLabel();">
                </div>

            </div>
            <div class="footer-menu-container">
                <span class="pinn">
                    <img *ngIf="isChecklist" class="icon" (click)="isChecklist = false; deleteChecklistItems()"
                        src=".\assets\icons\checkbox-black.svg" alt="Pinned">
                    <img *ngIf="!isChecklist" class="icon" (click)="isChecklist = true; isChecklistItem()"
                        src=".\assets\icons\checkbox-outline.svg" alt="Not pinned">
                </span>
                <div class="icon" (click)="createNote()"><strong>Erstellen</strong></div>
                <div class="icon"></div>
            </div>
        </div>
    </div>
</div>
<div class="main-note-board">
    <div *ngIf="noteService.pinnedNotes.length != 0" style="width: 100%;">
        <h2>Angepinnte Notizen</h2>
        <div class="note-board">
            <div *ngFor="let note of noteService.pinnedNotes">
                <app-note [note]="note"></app-note>
            </div>
        </div>
    </div>

    <div class="note-board" style="width: 100%;">
        <div *ngFor="let note of noteService.unpinnedNotes">
            <app-note [note]="note"></app-note>
        </div>
    </div>
</div>